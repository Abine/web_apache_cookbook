#
# Cookbook Name:: web_apache
#
# Copyright RightScale, Inc. All rights reserved.
# All access and use subject to the RightScale Terms of Service available at
# http://www.rightscale.com/terms.php and, if applicable, other agreements
# such as a RightScale Master Subscription Agreement.
# 
# Managed by RightScale
# DO NOT EDIT BY HAND
#

<IfModule mod_headers.c>
	Header set Access-Control-Allow-Origin "*"
	Header set Access-Control-Allow-Credentials true
	Header set Access-Control-Allow-Headers content-type,accept
	Header set Access-Control-Allow-Methods GET,CREATE,DELETE,POST,OPTIONS,PUT,INDEX
	#Header set Access-Control-Allow-Origin http://abine-dnt-stage.s3-website-us-east-1.amazonaws.com
	Header set Access-Control-Max-Age 1728000
</IfModule>

<IfModule mod_rewrite.c>
  RewriteEngine On

  # Redirects to a maintenance page if the specified file below exists
  # ...but it still allows images to be served
  RewriteCond /home/webapp/system/<%= node[:web_apache][:maintenance_file] %> -f
  RewriteCond %{SCRIPT_FILENAME} !/system/<%= node[:web_apache][:maintenance_file] %> 
  RewriteCond %{SCRIPT_FILENAME} !^(.+).(gif|png|jpg|css|js|swf)$
  RewriteRule ^.*$ /home/webapp/system/<%= node[:web_apache][:maintenance_file] %> [L]
</IfModule>
